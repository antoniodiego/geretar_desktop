{
    "sourceFile": "src/main/java/br/com/antoniodiego/gertarefas/ui/login/TelaLogin.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1751340800146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1751341836087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,6 @@\n package br.com.antoniodiego.gertarefas.ui.login;\n \n-import br.com.antoniodiego.gertarefas.persist.daos.DAOUsuario;\n-\n import java.awt.event.KeyEvent;\n import java.awt.event.WindowAdapter;\n import java.awt.event.WindowEvent;\n \n@@ -15,8 +13,9 @@\n import javax.swing.KeyStroke;\n import javax.swing.event.CaretEvent;\n import javax.swing.event.CaretListener;\n \n+import br.com.antoniodiego.gertarefas.persist.DAOUsuario;\n import br.com.antoniodiego.gertarefas.pojo.Usuario;\n import br.com.antoniodiego.gertarefas.ui.principal.JanelaPrincipalMatisse;\n import br.com.antoniodiego.gertarefas.util.HibernateUtil;\n \n"
                }
            ],
            "date": 1751340800146,
            "name": "Commit-0",
            "content": "package br.com.antoniodiego.gertarefas.ui.login;\n\nimport br.com.antoniodiego.gertarefas.persist.daos.DAOUsuario;\n\nimport java.awt.event.KeyEvent;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\n\nimport javax.swing.AbstractButton;\nimport javax.swing.JButton;\nimport javax.swing.JDialog;\nimport javax.swing.JLabel;\nimport javax.swing.JPasswordField;\nimport javax.swing.JTextField;\nimport javax.swing.KeyStroke;\nimport javax.swing.event.CaretEvent;\nimport javax.swing.event.CaretListener;\n\nimport br.com.antoniodiego.gertarefas.pojo.Usuario;\nimport br.com.antoniodiego.gertarefas.ui.principal.JanelaPrincipalMatisse;\nimport br.com.antoniodiego.gertarefas.util.HibernateUtil;\n\nimport java.awt.Container;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.swing.AbstractAction;\nimport javax.swing.JCheckBox;\n\n/**\n * Janela de entrada.\n *\n * @author Ant?nio Diego\n *\n */\n//TODO: Usar Actions nos men e bot\npublic class TelaLogin extends JDialog {\n\n    private static final long serialVersionUID = 78928912605018205L;\n    public JTextField campoUsuario;\n    public JPasswordField campoSenha;\n    private JButton botaoLogin;\n    private AbstractButton botaoDeletar;\n    private JButton botaoNovo;\n    private final JanelaPrincipalMatisse pai;\n    private JCheckBox chekManter;\n    private final DAOUsuario gere;\n    private AcaoLogin acLo;\n\n    public TelaLogin(JanelaPrincipalMatisse parente, boolean modal) {\n        super(parente, \"Entrada\", modal);\n        this.pai = parente;\n        gere = new DAOUsuario(HibernateUtil.getInstance());\n        criaInter();\n    }\n\n    private void criaInter() {\n        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);\n        setLocationByPlatform(true);\n        setLocationRelativeTo(pai);\n\n        addWindowListener(new WindowAdapter() {\n\n            @Override\n            public void windowClosing(WindowEvent ev) {\n                System.exit(0);\n            }\n        });\n        Container painelConteudo = getContentPane();\n        //GroupLayout leiauteGrupo = new GroupLayout(painelConteudo);\n        //painelConteudo.setBorder(new EmptyBorder(5, 5, 5, 5));\n        //setContentPane(painelConteudo);\n        GridBagLayout leiG = new GridBagLayout();\n        painelConteudo.setLayout(leiG);\n\n        GridBagConstraints cons = new GridBagConstraints();\n        // Adicionar componentes\n        // int rotulosX = 5;\n        // int camposX = 54;\n        // int x = 0;\n        // int y = 8;\n        JLabel rotuloUsuario = new JLabel(\"Nome de usu\\u00e1rio: \");\n        //rotuloUsuario.setBounds(rotulosX, y, 40, 20);\n        //painelConteudo.add(rotuloUsuario);\n\n        campoUsuario = new JTextField(20);\n        //TODO: Enter\n        //campoUsuario.registerKeyboardAction(pai, \"login_ok\", KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0),\n        //       JComponent.WHEN_FOCUSED);\n        //campoUsuario.setBounds(camposX, y, 203, 20);\n        //painelConteudo.add(campoUsuario);\n\n        JLabel rotuloSenha = new JLabel(\"Senha: \");\n        campoSenha = new JPasswordField(20);\n//        campoSenha.registerKeyboardAction(pai, \"login_ok\",, 0),\n//                JComponent.WHEN_FOCUSED);\n        campoSenha.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), \"Login\");\n        //.putValue(\"Login\",\"Teste\");\n    //    campoSenha.addActionListener(this);\n        //campoSenha.setBounds(camposX, y, 203, 20);\n        //painelConteudo.add(campoSenha);\n\n        chekManter = new JCheckBox(\"Manter conectado\");\n        // chekManter.addActionListener(this);\n\n        acLo = new AcaoLogin();\n        botaoLogin = new JButton(acLo);\n        botaoLogin.setFocusPainted(true);\n        \n        campoSenha.getActionMap().put(\"Login\", botaoLogin.getAction());\n        //x += 60;\n        botaoDeletar = new JButton(\"Deletar\");\n        botaoDeletar.setActionCommand(\"delete_user\");\n//        botaoDeletar.addActionListener(pai.getControl().getAcGere());\n      \n        botaoNovo = new JButton(\"Novo usu\\u00e1rio\");\n        botaoNovo.setActionCommand(\"cadastrar\");\n     //   botaoNovo.addActionListener(pai.getControl().getAcGere());\n \n        //TODO: Adcio fechar\n        JButton botaoFechar = new JButton(\"Fechar\");\n        botaoFechar.addActionListener((ActionEvent e) -> {\n            if (TelaLogin.this.isModal()) {\n                System.exit(0);\n            } else {\n                TelaLogin.this.dispose();\n            }\n        });\n\n        CaretListener camposListener = (CaretEvent e) -> {\n            atualizaBot\\u00f5es();\n        };\n\n        campoUsuario.addCaretListener(camposListener);\n        campoSenha.addCaretListener(camposListener);\n\n        cons.weightx = 1;\n        cons.weighty = 1;\n        cons.anchor = GridBagConstraints.FIRST_LINE_START;\n        painelConteudo.add(rotuloUsuario, cons);\n        cons.gridx = 1;\n        cons.gridwidth = 2;\n        painelConteudo.add(campoUsuario, cons);\n\n        cons.gridx = 0;\n        cons.gridy = 1;\n        cons.gridwidth = 1;\n        painelConteudo.add(rotuloSenha, cons);\n        cons.gridx = 1;\n        cons.gridwidth = 2;\n        painelConteudo.add(campoSenha, cons);\n\n        cons.gridy = 2;\n        cons.gridx = 0;\n        cons.gridwidth = 1;\n        painelConteudo.add(chekManter, cons);\n        cons.gridy = 3;\n        cons.anchor = GridBagConstraints.LAST_LINE_END;\n        cons.gridx = 1;\n        painelConteudo.add(botaoLogin, cons);\n        cons.gridx = 2;\n        painelConteudo.add(botaoDeletar, cons);\n        cons.gridy = 4;\n        cons.gridx = 1;\n        painelConteudo.add(botaoNovo, cons);\n        cons.gridx = 2;\n        painelConteudo.add(botaoFechar, cons);\n        // setResizable(false);\n//        Group grupoHor = leiauteGrupo.createSequentialGroup();\n//        grupoHor.addGroup(leiauteGrupo.createParallelGroup().addComponent(rotuloUsuario).addComponent(rotuloSenha).addComponent(botaoLogin).addComponent(botaoNovo));\n//        grupoHor.addGroup(leiauteGrupo.createParallelGroup().addComponent(campoUsuario).addComponent(campoSenha).addComponent(botaoDeletar).addComponent(botaoFechar));\n//        leiauteGrupo.setHorizontalGroup(grupoHor);\n//\n//        Group grupoVert = leiauteGrupo.createSequentialGroup();\n//        grupoVert.addGroup(leiauteGrupo.createParallelGroup().addComponent(rotuloUsuario).addComponent(campoUsuario));\n//        grupoVert.addGroup(leiauteGrupo.createParallelGroup().addComponent(rotuloSenha)).addComponent(campoSenha);\n//        grupoVert.addGroup(leiauteGrupo.createParallelGroup().addComponent(botaoLogin).addComponent(botaoDeletar));\n//        grupoVert.addGroup(leiauteGrupo.createParallelGroup().addComponent(botaoNovo).addComponent(botaoFechar));\n//\n//        leiauteGrupo.setVerticalGroup(grupoVert);\n\n        getRootPane().setDefaultButton(botaoLogin);\n        // atualizaBot\\u00f5es();\n        pack();\n    }\n\n    public Usuario getUsuario() {\n        return new Usuario(campoUsuario.getText(), campoSenha.getPassword());\n    }\n\n    public void limpa() {\n        campoUsuario.setText(null);\n        campoSenha.setText(null);\n    }\n\n    /**\n     *\n     */\n    public void atualizaBot\\u00f5es() {\n        boolean temTexto = !campoUsuario.getText().isEmpty() && campoSenha.getPassword().length > 0;\n        // Analizar se est? redundate - XXX -Estava \n        boolean temUsu\\u00e1rio = gere.temU(getUsuario());\n//        System.out.println(\"Tem t\"+ temTexto);\n//        System.out.println(\"Tem n: \"+temNomeUsu\\u00e1rio);\n//JanelaPrincipal.bancoDadosUsu\\u00e1rio.hasUserName(getUsuario());\n        acLo.setEnabled(temTexto && temUsu\\u00e1rio);\n        botaoNovo.setEnabled(temTexto && !temUsu\\u00e1rio);\n        botaoDeletar.setEnabled(temTexto && temUsu\\u00e1rio);\n    }\n\n    private class AcaoLogin extends AbstractAction {\n\n        public AcaoLogin() {\n            super(\"Login\");\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n//            try {\n//                pai.getControl().fazLogin(chekManter.isSelected());\n//            } catch (IOException ex) {\n//                Logger.getLogger(TelaLogin.class.getName()).log(Level.SEVERE, null, ex);\n//            }\n        }\n    }\n}\n"
        }
    ]
}